# Example Driver Configuration for 3-Camera Pipeline

[driver]
instance_id = "driver-01"
control_channel = "aeron:ipc"
control_stream_id = 1000
announce_channel = "aeron:ipc"
announce_stream_id = 1001
qos_channel = "aeron:ipc"
qos_stream_id = 1200

[shm]
base_dir = "/dev/shm/tensorpool"
require_hugepages = false
page_size_bytes = 4096
permissions_mode = "660"

[policies]
allow_dynamic_streams = true
default_profile = "raw_profile"
announce_period_ms = 1000
lease_keepalive_interval_ms = 1000
lease_expiry_grace_intervals = 3

[profiles.raw_profile]
header_nslots = 1024
max_dims = 8
header_slot_bytes = 256

[[profiles.raw_profile.payload_pools]]
pool_id = 1
stride_bytes = 1048576

[[profiles.raw_profile.payload_pools]]
pool_id = 2
stride_bytes = 4194304

[profiles.processed_profile]
header_nslots = 512
max_dims = 8
header_slot_bytes = 256

[[profiles.processed_profile.payload_pools]]
pool_id = 1
stride_bytes = 524288

[[profiles.processed_profile.payload_pools]]
pool_id = 2
stride_bytes = 2097152

[streams]

[streams.cam1]
stream_id = 1001
profile = "raw_profile"

[streams.cam2]
stream_id = 1002
profile = "raw_profile"

[streams.cam3]
stream_id = 1003
profile = "raw_profile"

[streams.proc1]
stream_id = 2001
profile = "processed_profile"

[streams.proc2]
stream_id = 2002
profile = "processed_profile"

[streams.proc3]
stream_id = 2003
profile = "processed_profile"
