# Example Bridge Configuration
# Note: consider reserving a bridge payload stream ID range (e.g., 50000-59999)
# to avoid collisions with local IPC/control streams.

[bridge]
instance_id = "bridge-01"
payload_channel = "aeron:udp?endpoint=239.1.1.1:40456"
payload_stream_id = 3000
control_channel = "aeron:udp?endpoint=239.1.1.1:40457"
control_stream_id = 3001
# metadata_channel carries DataSourceAnnounce/DataSourceMeta and optional TraceLinkSet between hosts.
metadata_channel = "aeron:udp?endpoint=239.1.1.1:40458"
metadata_stream_id = 3002
source_metadata_stream_id = 1300
# control_channel carries forwarded ShmPoolAnnounce and optional QoS/FrameProgress.
mtu_bytes = 1408
chunk_bytes = 1200
max_chunk_bytes = 65535
max_payload_bytes = 1073741824
assembly_timeout_ms = 250
forward_metadata = true
forward_qos = false
forward_progress = false
forward_tracelink = false

[[mappings]]
source_stream_id = 10000
dest_stream_id = 20000
profile = "processed_profile"
metadata_stream_id = 20000
source_control_stream_id = 1201
dest_control_stream_id = 2201

[[mappings]]
source_stream_id = 10001
dest_stream_id = 20001
profile = "processed_profile"
metadata_stream_id = 20001
source_control_stream_id = 1202
dest_control_stream_id = 2202

# Bidirectional example: add reverse mappings to the same bridge instance
# Note: reverse mappings swap source/dest control stream IDs.
[[mappings]]
source_stream_id = 20000
dest_stream_id = 10000
profile = "processed_profile"
metadata_stream_id = 10000
source_control_stream_id = 2201
dest_control_stream_id = 1201

[[mappings]]
source_stream_id = 20001
dest_stream_id = 10001
profile = "processed_profile"
metadata_stream_id = 10001
source_control_stream_id = 2202
dest_control_stream_id = 1202
